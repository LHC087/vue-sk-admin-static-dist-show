webpackJsonp([11],{"5d94":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={msg:"OK",code:"200",data:{pageNum:1,pageSize:15,size:7,startRow:1,endRow:7,total:7,pages:1,list:[{id:8,phone:"bz",password:"pp",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-01 00:00",deptId:1,activeCode:"6446e80a2e8241debcf9e1c96ada4ced",totalCount:null,deptName:"市场中心"},{id:10,phone:"jimorufeng",password:"000000",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-01 00:00",deptId:1,activeCode:"6446e80a2e8241debcf9e1c96ada4ced",totalCount:null,deptName:"市场中心"},{id:14,phone:"qingli",password:"zheng1993",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-22 12:18",deptId:1,activeCode:"6446e80a2e8241debcf9e1c96ada4ced",totalCount:null,deptName:"市场中心"},{id:15,phone:"te",password:"pp",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-25 15:29",deptId:1,activeCode:"0d63f4af6c0a43d78b22cd7d3665acd6",totalCount:null,deptName:"市场中心"},{id:17,phone:"ge",password:"pp",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-25 15:42",deptId:2,activeCode:"96047766a33f47ed994365ac38c19efc",totalCount:null,deptName:"财务中心"},{id:18,phone:"sa",password:"tt",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-25 15:51",deptId:3,activeCode:"14295907b5e54c7e940d94c64471b61d",totalCount:null,deptName:"营销中心"},{id:20,phone:"测试号",password:"pp",nickName:null,userRole:2,userStatus:1,creditNum:null,realName:null,alipay:null,createTime:"2019-10-28 11:18",deptId:2,activeCode:"653aa68d23814c6bad406a85388ca154",totalCount:null,deptName:"财务中心"}],prePage:0,nextPage:0,isFirstPage:!0,isLastPage:!0,hasPreviousPage:!1,hasNextPage:!1,navigatePages:8,navigatepageNums:[1],navigateFirstPage:1,navigateLastPage:1,firstPage:1,lastPage:1},dept:[{id:1,deptName:"市场中心",createTime:"2019-10-25 15:09"},{id:2,deptName:"财务中心",createTime:"2019-10-25 15:37"},{id:3,deptName:"营销中心",createTime:"2019-10-25 15:44"}]},i=a("P9l9"),l={name:"BlogGerPage",inject:["reload"],mounted:function(){this.tableData=n.data.list,this.loading=!1,this.deptlist=n.dept},watch:{},data:function(){return{deptname:"",deptlist:[],bzType:1,bzTypelist:[{id:1,name:"已注册"},{id:3,name:"已冻结"}],realname:"",loading:!0,tableData:[],currentPage:1,totalCount:0,pageSizes:[15,20,30,40,50],PageSize:15,selecttime:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},editDialog:!1,editForm:{id:"",editdepartment:""},editRules:{editdepartment:[{required:!0,message:"部门不能为空",trigger:"change"}]}}},methods:{getUsersCentergetAllUserfunction:function(e){var t=this;this.tableData=[],""!=this.selecttime&&null!=this.selecttime||""!=this.realname&&null!=this.realname?""!=this.selecttime&&null!=this.selecttime||""==this.realname?""!=this.selecttime&&""==this.realname?Object(i.i)({deptId:this.deptname,userStatus:this.bzType,pageNum:this.currentPage,pageSize:this.PageSize,userRole:2,startTime:this.selecttime[0],endTime:this.selecttime[1]}).then(function(e){200==e.code?void 0==e.data?t.$message.info("数据为空!"):(t.tableData=e.data.list,t.totalCount=e.data.total,t.$message.success(e.data.msg)):t.$message.info("暂无数据")}).catch(function(e){}):Object(i.i)({deptId:this.deptname,userStatus:this.bzType,phone:this.realname,pageNum:this.currentPage,pageSize:this.PageSize,userRole:2,startTime:this.selecttime[0],endTime:this.selecttime[1]}).then(function(e){200==e.code?void 0==e.data?t.$message.info("数据为空!"):(t.tableData=e.data.list,t.totalCount=e.data.total,t.$message.success(e.data.msg)):t.$message.info("暂无数据")}).catch(function(e){}):Object(i.i)({deptId:this.deptname,userStatus:this.bzType,phone:this.realname,pageNum:this.currentPage,pageSize:this.PageSize,userRole:2}).then(function(e){200==e.code?void 0==e.data?t.$message.info("数据为空!"):(t.tableData=e.data.list,t.totalCount=e.data.total,t.$message.success(e.data.msg)):t.$message.info("暂无数据")}).catch(function(e){}):Object(i.i)({deptId:this.deptname,userStatus:this.bzType,pageNum:this.currentPage,pageSize:this.PageSize,userRole:2}).then(function(e){200==e.code?void 0==e.data?t.$message.info("数据为空!"):(t.tableData=e.data.list,t.totalCount=e.data.total,t.$message.success(e.data.msg)):t.$message.info("暂无数据")}).catch(function(e){}),this.loading=!1},getDeptallTotalfunction:function(){var e=this;Object(i.d)().then(function(t){200==t.code?void 0==t.data?e.$message.info("数据为空!"):(e.deptlist=t.data,e.$message.success(t.msg)):e.$message.info("暂无数据")}).catch(function(e){})},setUser:function(e){this.editDialog=!0,this.editForm.id=e.id,this.editForm.editdepartment=e.deptId},updateUser:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;Object(i.s)({userId:t.editForm.id,deptId:t.editForm.editdepartment}).then(function(a){200==a.code?(t.resetForm(e),t.$message.success(a.msg),t.getUsersCentergetAllUserfunction()):t.$message.info(a.msg)}).catch(function(e){})})},unbundLing:function(e,t){var a=this;this.$confirm("确定要修改当前账号的状态吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var n=a;Object(i.r)({userId:e,userStatus:t,userRole:2}).then(function(e){200==e.code?n.$confirm(e.msg,"提示",{confirmButtonText:"确定",showClose:!1,showCancelButton:!1,type:"warning",center:!0}).then(function(){n.getUsersCentergetAllUserfunction()}):n.$message.info(e.msg)}).catch(function(e){})}).catch(function(){a.$message.info("已取消")})},selectgetUsersCentergetAllUserfunction:function(){this.currentPage=1,this.getUsersCentergetAllUserfunction()},handleSizeChange:function(e){this.PageSize=e,this.currentPage=1,this.getUsersCentergetAllUserfunction()},handleCurrentChange:function(e){this.currentPage=e,this.getUsersCentergetAllUserfunction()},resetForm:function(e){"editForm"==e&&(this.$refs.editForm.resetFields(),this.editDialog=!1)},updataall:function(){this.reload()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"30px"}},[[e._v("\n        账号:\n        "),a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.realname,callback:function(t){e.realname=t},expression:"realname"}})],e._v(" "),[e._v("\n        部门:\n        "),a("el-select",{attrs:{placeholder:"请选择部门",clearable:""},on:{change:function(t){return e.selectgetUsersCentergetAllUserfunction()}},model:{value:e.deptname,callback:function(t){e.deptname=t},expression:"deptname"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.deptName,value:e.id}})}),1)],e._v(" "),[e._v("\n        账号状态:\n        "),a("el-select",{attrs:{placeholder:"请选择结算类型"},on:{change:function(t){return e.selectgetUsersCentergetAllUserfunction()}},model:{value:e.bzType,callback:function(t){e.bzType=t},expression:"bzType"}},e._l(e.bzTypelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],e._v(" "),[e._v("\n        时间:\n        "),a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",align:"center"},model:{value:e.selecttime,callback:function(t){e.selecttime=t},expression:"selecttime"}})],e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.selectgetUsersCentergetAllUserfunction()}}},[e._v("搜索")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:e.updataall}})],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"账号",prop:"phone",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",prop:"deptName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"账号状态",prop:"userStatus",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.userStatus?a("span",[e._v("已注册")]):e._e(),e._v(" "),3==t.row.userStatus?a("span",[e._v("已冻结")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",prop:"createTime",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.setUser(t.row)}}},[e._v("编辑")]),e._v(" "),1===t.row.userStatus?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.unbundLing(t.row.id,t.row.userStatus)}}},[e._v("冻结")]):e._e(),e._v(" "),3===t.row.userStatus?a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){return e.unbundLing(t.row.id,t.row.userStatus)}}},[e._v("解绑")]):e._e()]}}])})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改部门",visible:e.editDialog,align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialog=t},close:function(t){return e.resetForm("editForm")}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"序号",prop:"id"}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",e._n(t))},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"editdepartment"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择部门",clearable:""},model:{value:e.editForm.editdepartment,callback:function(t){e.$set(e.editForm,"editdepartment",t)},expression:"editForm.editdepartment"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.deptName,value:e.id}})}),1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.updateUser("editForm")}}},[e._v("修改")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(e){a("xIwn")},"data-v-35e2ec3f",null);t.default=r.exports},xIwn:function(e,t){}});