webpackJsonp([7],{JEAE:function(e,t){},RDtb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={msg:"OK",code:"200",data:{pageNum:1,pageSize:15,size:3,startRow:1,endRow:3,total:3,pages:1,list:[{id:1,deptName:"市场中心",createTime:"2019-10-25 15:09"},{id:2,deptName:"财务中心",createTime:"2019-10-25 15:37"},{id:3,deptName:"营销中心",createTime:"2019-10-25 15:44"}],prePage:0,nextPage:0,isFirstPage:!0,isLastPage:!0,hasPreviousPage:!1,hasNextPage:!1,navigatePages:8,navigatepageNums:[1],navigateFirstPage:1,navigateLastPage:1,firstPage:1,lastPage:1}},n=a("P9l9"),r={name:"DepartmentPage",inject:["reload"],mounted:function(){this.tableData=i.data.list,this.loading=!1},watch:{},data:function(){return{loading:!0,tableData:[],currentPage:1,totalCount:0,pageSizes:[15,20,30,40,50],PageSize:15,addDialog:!1,editDialog:!1,addForm:{adddepartment:""},addRules:{adddepartment:[{required:!0,message:"部门不能为空",trigger:"blur"}]},editForm:{id:"",editdepartment:""},editRules:{editdepartment:[{required:!0,message:"部门不能为空",trigger:"blur"}]}}},methods:{getDeptAllfunction:function(e){var t=this;this.tableData=[],Object(n.c)({pageNum:this.currentPage,pageSize:this.PageSize}).then(function(e){200==e.code?0==e.data.list.length?(t.$message.info("数据为空!"),t.tableData=e.data.list,t.totalCount=e.data.total):(t.tableData=e.data.list,t.totalCount=e.data.total,t.$message.success(e.msg)):t.$message.error(e.msg),t.loading=!1}).catch(function(e){})},handleSizeChange:function(e){this.PageSize=e,this.currentPage=1,this.getDeptAllfunction()},handleCurrentChange:function(e){this.currentPage=e,this.getDeptAllfunction()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;Object(n.k)({deptName:t.addForm.adddepartment}).then(function(a){200==a.code?(t.$message.success(a.msg),t.getDeptAllfunction(),t.resetForm(e)):t.$message.info(a.msg)}).catch(function(e){})})},setUser:function(e){this.editDialog=!0,this.editForm.id=e.id,this.editForm.editdepartment=e.deptName},updateUser:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;Object(n.l)({deptId:t.editForm.id,deptName:t.editForm.editdepartment}).then(function(a){200==a.code?(t.$message.success(a.msg),t.getDeptAllfunction(),t.resetForm(e)):t.$message.info(a.msg)}).catch(function(e){})})},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除这条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(n.a)({deptId:e.id}).then(function(e){200==e.code?(t.$message.success(e.msg),t.getDeptAllfunction()):t.$message.info(e.msg)}).catch(function(e){})}).catch(function(){t.$message.info("已取消删除")})},resetForm:function(e){"addForm"==e?(this.$refs.addForm.resetFields(),this.addDialog=!1):"editForm"==e&&(this.$refs.editForm.resetFields(),this.editDialog=!1)},updataall:function(){this.reload()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"30px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addDialog=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:e.updataall}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",prop:"deptName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.setUser(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加部门",visible:e.addDialog,align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialog=t},close:function(t){return e.resetForm("addForm")}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"部门",prop:"adddepartment"}},[a("el-input",{attrs:{type:"text",clearable:""},model:{value:e.addForm.adddepartment,callback:function(t){e.$set(e.addForm,"adddepartment",t)},expression:"addForm.adddepartment"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.submitForm("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改部门",visible:e.editDialog,align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialog=t},close:function(t){return e.resetForm("editForm")}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"序号",prop:"id"}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",e._n(t))},expression:"editForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"editdepartment"}},[a("el-input",{attrs:{type:"text",clearable:""},model:{value:e.editForm.editdepartment,callback:function(t){e.$set(e.editForm,"editdepartment",t)},expression:"editForm.editdepartment"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.updateUser("editForm")}}},[e._v("修改")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,o,!1,function(e){a("JEAE")},"data-v-ace6c522",null);t.default=s.exports}});