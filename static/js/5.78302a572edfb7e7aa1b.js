webpackJsonp([5],{"+G/5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={msg:"OK",code:"200",data:[{orderIds:[155,158,160,175,177,225,228,247,249],orderIdsStr:"[155, 158, 160, 175, 177, 225, 228, 247, 249]",childOrderNum:9,userId:9,phone:"17674743181",realName:"段洁",alipay:"dj",totalMoney:34.9,payStatus:0,payStatusStr:"未结算"},{orderIds:[244,248,250],orderIdsStr:"[244, 248, 250]",childOrderNum:3,userId:11,phone:"18657530234",realName:"tw",alipay:"tw",totalMoney:3,payStatus:0,payStatusStr:"未结算"}],dept:[{id:1,deptName:"市场中心",createTime:"2019-10-25 15:09"},{id:2,deptName:"财务中心",createTime:"2019-10-25 15:37"},{id:3,deptName:"营销中心",createTime:"2019-10-25 15:44"}]},i={msg:"OK",code:"200",data:[{orderNo:"o1570779454078",orderNum:1,orderPrice:.9,joinNickname:"duanjie",joinRealName:"段洁",title:"论演女人的狐狸劲儿，我只服这位美女",taskformStr:"评论 点赞 转发 ",deptName:"市场中心"},{orderNo:"o1570788746693",orderNum:1,orderPrice:1,joinNickname:"duanjie",joinRealName:"段洁",title:"论推销我只服黄渤，忽悠一套一套的！",taskformStr:"点赞 评论 ",deptName:"市场中心"},{orderNo:"o1570789443143",orderNum:1,orderPrice:1,joinNickname:"duanjie",joinRealName:"段洁",title:"女大学生为写论文不惜献…身邻居大叔！",taskformStr:"点赞 评论 ",deptName:"市场中心"},{orderNo:"o1571284719136",orderNum:1,orderPrice:25,joinNickname:"duanjie",joinRealName:"段洁",title:"男人们都拍手叫好的一部犯罪电影《白日焰火》 廖凡因此部电影拿下柏林影帝[加油]",taskformStr:"评论 点赞 转发 ",deptName:"市场中心"},{orderNo:"o1571285260407",orderNum:1,orderPrice:3,joinNickname:"duanjie",joinRealName:"段洁",title:"大清早女友就这么暴力",taskformStr:"评论 点赞 转发 ",deptName:"市场中心"},{orderNo:"o1571643582319",orderNum:1,orderPrice:1,joinNickname:"duanjie",joinRealName:"段洁",title:"你们都在某上买过哪些超可爱的东西！什么都行！想让大家一起可可爱爱！",taskformStr:"评论 点赞 转发 ",deptName:"市场中心"},{orderNo:"o1571645423865",orderNum:1,orderPrice:1,joinNickname:"duanjie",joinRealName:"段洁",title:"双十一搶購累嗎。建議你們學我輕妝上陣。 當然少不了Bobbi Brown 。 。打開手機淘寶搜索持妝粉底液。入手臻享潤澤美唇3件禮。",taskformStr:"评论 点赞 转发 ",deptName:"市场中心"},{orderNo:"o1572428265604",orderNum:1,orderPrice:1,joinNickname:"duanjie",joinRealName:"段洁",title:"街边美食才是最好哒~",taskformStr:"评论 转发 ",deptName:"财务中心"},{orderNo:"o1572429875874",orderNum:1,orderPrice:1,joinNickname:"duanjie",joinRealName:"段洁",title:"没想到往这辈子第一次买得起的lv联名是英雄联盟皮肤。",taskformStr:"点赞 评论 转发 ",deptName:"财务中心"}]},o=n("P9l9"),r={name:"SettlementDetailsPage",props:["sendid"],mounted:function(){this.tableData=i.data,this.loading=!1},data:function(){return{loading:!0,tableData:[]}},methods:{export2Excel:function(){for(var e=this,t=this.tableData,a=0;a<t.length;a++)t[a].index=a+1;new Promise(function(e){e()}).then(function(){var a=new Date,i=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate(),o=n("I7hd").export_json_to_excel,r=t;o(["序号","订单编号","部门","昵称","标题","任务数量","任务要求","单价（元）"],e.formatJson(["index","orderNo","deptName","joinNickname","title","orderNum","taskformStr","orderPrice"],r),i+"结算明细excel列表")}.bind(null,n)).catch(n.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},postPayCenterPayDetailfunction:function(){var e=this;Object(o.p)({orderIdsStr:this.sendid}).then(function(t){200==t.code?void 0==t.data?e.$message.info("数据为空!"):(e.tableData=t.data,e.$message.success(t.msg)):e.$message.info(t.msg),e.loading=!1}).catch(function(e){})},callback:function(){this.$emit("listenToChildEvent","false")},turnrouter:function(e){this.$router.push({path:"/orderpage",query:{orderNo:e}})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"30px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.export2Excel()}}},[e._v("导出")]),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-back"},on:{click:e.callback}},[e._v("返回")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"订单编号",prop:"orderNo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{staticClass:"buttonText",on:{click:function(n){return e.turnrouter(t.row.orderNo)}}},[e._v(e._s(t.row.orderNo))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"部门",prop:"deptName",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"昵称",prop:"joinNickname",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"标题",prop:"title",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("span",[e._v(e._s(t.row.title))]),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.title))])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"任务数量",prop:"orderNum",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"任务要求",prop:"taskformStr",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"单价(元)",prop:"orderPrice",align:"center"}})],1)],1)],1)},staticRenderFns:[]};var s={name:"SettlementPage",inject:["reload"],components:{SettlementDetailsPage:n("VU/8")(r,l,!1,function(e){n("OGwh")},"data-v-a300f536",null).exports},mounted:function(){this.tableData=a.data,this.loading=!1,this.deptlist=a.dept},watch:{tableData:function(){""==this.tableData||null==this.tableData?this.daochushow=!0:this.daochushow=!1}},data:function(){return{daochushow:!0,xquserId:"",showxq:!1,homeindex:!0,deptname:"",deptlist:[],ddType:0,ddTypelist:[{id:0,name:"未结算"},{id:1,name:"结算中"},{id:2,name:"已结算"}],isshowss:0,isshow:!0,multipleSelection:"",realname:"",loading:!0,tableData:[],currentPage:1,totalCount:0,pageSizes:[15,20,30,40,50],PageSize:15,selecttime:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]}}},methods:{showMsgFormChild:function(e){this.showxq=e,this.homeindex=!0},getDeptallTotalfunction:function(){var e=this;Object(o.d)().then(function(t){200==t.code?void 0==t.data?e.$message.info("数据为空!"):(e.deptlist=t.data,e.$message.success(t.msg)):e.$message.info("暂无数据")}).catch(function(e){})},getPayCenterPayListfunction:function(e){var t=this;this.tableData=[],""==this.selecttime||null==this.selecttime?Object(o.g)({deptId:this.deptname,payStatus:this.ddType,realName:this.realname,startTime:"",endTime:""}).then(function(e){200==e.code?void 0==e.data?t.$message.info("数据为空!"):(t.tableData=e.data,t.totalCount=e.data.length,t.$message.success(e.msg)):t.$message.info(e.msg)}).catch(function(e){}):Object(o.g)({deptId:this.deptname,payStatus:this.ddType,realName:this.realname,startTime:this.selecttime[0],endTime:this.selecttime[1]}).then(function(e){200==e.code?void 0==e.data?t.$message.info("数据为空!"):(t.tableData=e.data,t.totalCount=e.data.length,t.$message.success(e.msg)):t.$message.info(e.msg)}).catch(function(e){}),this.loading=!1},toggleSelection:function(){this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},settlementingfunction:function(e,t){var n=this;this.$confirm("结算当前的选中项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var a=n;Object(o.q)({orderIdsStr:e,payStatus:t}).then(function(e){200==e.code?a.$confirm(e.msg,"提示",{confirmButtonText:"确定",showClose:!1,showCancelButton:!1,type:"warning",center:!0}).then(function(){a.getPayCenterPayListfunction()}).catch(function(){}):a.$message.error(e.msg)}).catch(function(e){})}).catch(function(){n.$message.info("已取消")})},settlementingallfunction:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("结算当前的选中项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){for(var t=[],n=0;n<e.multipleSelection.length;n++)t=t.concat(e.multipleSelection[n].orderIds);var a=e;Object(o.q)({orderIdsStr:"["+t+"]",payStatus:a.ddType}).then(function(e){200==e.code?a.$confirm(e.msg,"提示",{confirmButtonText:"确定",showClose:!1,showCancelButton:!1,type:"warning",center:!0}).then(function(){a.getPayCenterPayListfunction()}).catch(function(){}):a.$message.error(e.msg)}).catch(function(e){})}).catch(function(){e.$message.info("已取消")}):this.$message.error("勾选不能为空！")},selectPayCenterPayListfunction:function(){this.currentPage=1,0===this.ddType||1===this.ddType?this.isshow=!0:this.isshow=!1,this.isshowss=this.ddType,this.getPayCenterPayListfunction()},handleSizeChange:function(e){this.PageSize=e,this.currentPage=1},handleCurrentChange:function(e){this.currentPage=e},export2Excel:function(){var e="";if(""==this.selecttime||null==this.selecttime)this.$message.info("请选择时间再导出数据表");else{e="?payStatus="+this.ddType+"&realName="+this.realname+"&startTime="+this.selecttime[0]+"&endTime="+this.selecttime[1],this.$message.info("开始导出表格");var t=window.g.apiUrl+"/payCenter/getExcel"+e,n=document.createElement("iframe");n.style.display="none",n.src=t,n.onload=function(){document.body.removeChild(n)},document.body.appendChild(n)}},seeMore:function(e){this.showxq=!0,this.homeindex=!1,this.xquserId=e.orderIdsStr},updataall:function(){this.reload()}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[1==e.homeindex?n("el-main",[n("div",{staticClass:"demo-input-suffix",staticStyle:{"margin-bottom":"30px"}},[[e._v("\n        部门:\n        "),n("el-select",{attrs:{placeholder:"请选择部门",clearable:""},on:{change:function(t){return e.selectPayCenterPayListfunction()}},model:{value:e.deptname,callback:function(t){e.deptname=t},expression:"deptname"}},e._l(e.deptlist,function(e){return n("el-option",{key:e.id,attrs:{label:e.deptName,value:e.id}})}),1)],e._v(" "),[e._v("\n        真名:\n        "),n("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入真实姓名",clearable:""},model:{value:e.realname,callback:function(t){e.realname=t},expression:"realname"}})],e._v(" "),[e._v("\n        结算类型:\n        "),n("el-select",{attrs:{placeholder:"请选择结算类型"},on:{change:function(t){return e.selectPayCenterPayListfunction()}},model:{value:e.ddType,callback:function(t){e.ddType=t},expression:"ddType"}},e._l(e.ddTypelist,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],e._v(" "),[e._v("\n        时间:\n        "),n("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",align:"center"},model:{value:e.selecttime,callback:function(t){e.selecttime=t},expression:"selecttime"}})],e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.selectPayCenterPayListfunction()}}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-download",disabled:e.daochushow},on:{click:function(t){return e.export2Excel()}}},[e._v("导出")]),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:e.updataall}})],2),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.PageSize,e.currentPage*e.PageSize),border:""},on:{"selection-change":e.handleSelectionChange}},[1==e.isshow?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"接单员ID",prop:"userId",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"支付宝账号",prop:"alipay",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"真实姓名",prop:"realName",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"任务总数量",prop:"childOrderNum",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top",trigger:"hover",content:"点击可查看详细任务。"}},[n("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(n){return e.seeMore(t.row)}},slot:"reference"},[e._v(e._s(t.row.childOrderNum))])],1)]}}],null,!1,1704333989)}),e._v(" "),n("el-table-column",{attrs:{label:"总金额",prop:"totalMoney",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"结算状态",prop:"payStatusStr",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.payStatus?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.settlementingfunction(t.row.orderIdsStr,t.row.payStatus)}}},[e._v("结算")]):e._e(),e._v(" "),1===t.row.payStatus?n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){return e.settlementingfunction(t.row.orderIdsStr,t.row.payStatus)}}},[e._v("确定结算")]):e._e()]}}],null,!1,3106767235)})],1),e._v(" "),0===e.isshowss?n("div",{staticStyle:{margin:"10px 0px",display:"inline-block"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.settlementingallfunction()}}},[e._v("选中结算")]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择")])],1):e._e(),e._v(" "),1===e.isshowss?n("div",{staticStyle:{margin:"10px 0px",display:"inline-block"}},[n("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.settlementingallfunction()}}},[e._v("选中确定结算")]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择")])],1):e._e(),e._v(" "),n("div",{staticClass:"tabListPage"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.PageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e(),e._v(" "),1==e.showxq?n("SettlementDetailsPage",{attrs:{sendid:e.xquserId},on:{listenToChildEvent:e.showMsgFormChild}}):e._e()],1)},staticRenderFns:[]};var d=n("VU/8")(s,c,!1,function(e){n("1BY6")},"data-v-38a17028",null);t.default=d.exports},"1BY6":function(e,t){},OGwh:function(e,t){}});